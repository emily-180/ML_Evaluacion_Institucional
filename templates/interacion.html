<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fase 3: Predicion de Satisfacion de Estudiante</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="static/css/style_interacion.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">
                <img src="static/imagens/logo.png" width="80" alt="CPA">
            </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCPA">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarCPA">
                <ul class="navbar-nav ms-auto align-items-lg-center">
                    <li class="nav-item"><a class="nav-link" href="home">Home</a></li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button"
                            data-bs-toggle="dropdown">Proyecto</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="negocio">Fase 1: Entendimiento del negocio</a></li>
                            <li><a class="dropdown-item" href="analise">Fase 2: Entendimiento e ingenierÃ­a de datos</a>
                            </li>
                            <li><a class="dropdown-item" href="interacion">Fase 3: Predicion de Satisfacion</a></li>
                        </ul>
                    </li>

                    <li class="nav-item ms-3">
                        <a class="nav-link text-danger" href="#" onclick="logout()"><i
                                class="bi bi-box-arrow-right fs-5"></i>Cerrar session</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <header>
        <h1 class="fw-bold">Predicion de Satisfacion</h1>
    </header>
    
    <main class="container">
        <form id="form-satisfacao" class="p-4 shadow rounded bg-light">

            <div class="row mb-3">
                <div class="col-md-3">
                    <label class="form-label">Campus</label>
                    <select class="form-select" name="campus" required>
                        <option value="">Seleccione...</option>
                        <option>Carmo de Minas</option>
                        <option>Inconfidentes</option>
                        <option>Machado</option>
                        <option>Muzambinho</option>
                        <option>Passos</option>
                        <option>Pouso Alegre</option>
                        <option>PoÃ§os de Caldas</option>
                        <option>TrÃªs CoraÃ§Ãµes</option>
                        <option>Reitoria</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="curso" class="form-label fw-bold">Curso</label>
                    <select id="curso" name="curso" class="form-select" required>
                        <option value="">Selecciona tu curso...</option>
                    </select>
                </div>


                <div class="col-md-3">
                    <label class="form-label">Perfil</label>
                    <select class="form-select" name="perfil" required>
                        <option value="">Seleccione...</option>
                        <option>Discente do TÃ©cnico</option>
                        <option>Discente do Superior</option>
                        <option>Docente</option>
                        <option>TAE</option>
                    </select>
                </div>

                <div class="col-md-3">
                    <label class="form-label">Serie / PerÃ­odo</label>
                    <select class="form-select" name="serie" required>
                        <option value="">Seleccione...</option>
                        <option>1Âº</option>
                        <option>2Âº</option>
                        <option>3Âº</option>
                        <option>4Âº</option>
                        <option>5Âº</option>
                        <option>6Âº</option>
                        <option>7Âº</option>
                        <option>8Âº</option>
                        <option>9Âº</option>
                        <option>10Âº</option>
                    </select>
                </div>
            </div>

            <hr>

            <form id="formulario" class="space-y-6">
                <div class="pergunta">
                    <label class="block font-semibold mb-2">1. SÃ© cÃ³mo obtener informaciÃ³n para realizar trÃ¡mites
                        administrativos..</label>
                    <select name="QuestÃ£o 1. Sei obter informaÃ§Ãµes para realizar os procedimentos administrativos"
                        class="w-full border border-gray-300 rounded-lg p-2" required>
                        <option value="">Seleccione</option>
                        <option value="1">Totalmente en desacuerdo</option>
                        <option value="2">En desacuerdo</option>
                        <option value="3">Ni de acuerdo ni en desacuerdo</option>
                        <option value="4">De acuerdo</option>
                        <option value="5">Totalmente de acuerdo</option>
                        <option value="0">No sÃ© responder</option>
                        <option value="0">No quiero responder</option>

                    </select>
                </div>

                <div class="pergunta">
                    <label class="block font-semibold mb-2">2. El horario de atenciÃ³n al alumnado del profesorado se
                        publicita ampliamente y es fÃ¡cilmente accesible.</label>
                    <select
                        name="QuestÃ£o 3. O horÃ¡rio de atendimento dos docentes Ã© amplamente divulgado e de fÃ¡cil acesso."
                        class="w-full border border-gray-300 rounded-lg p-2" required>
                        <option value="">Seleccione</option>
                        <option value="1">Totalmente en desacuerdo</option>
                        <option value="2">En desacuerdo</option>
                        <option value="3">Ni de acuerdo ni en desacuerdo</option>
                        <option value="4">De acuerdo</option>
                        <option value="5">Totalmente de acuerdo</option>
                        <option value="0">No sÃ© responder</option>
                        <option value="0">No quiero responder</option>

                    </select>
                </div>

                <div class="pergunta">
                    <label class="block font-semibold mb-2">3. El horario de atenciÃ³n al pÃºblico del personal
                        administrativo es ampliamente difundido y fÃ¡cilmente accesible.</label>
                    <select
                        name="QuestÃ£o 3. O horÃ¡rio de atendimento dos tÃ©cnicos administrativos Ã© amplamente divulgado e de fÃ¡cil acesso"
                        class="w-full border border-gray-300 rounded-lg p-2" required>
                        <option value="">Seleccione</option>
                        <option value="1">Totalmente en desacuerdo</option>
                        <option value="2">En desacuerdo</option>
                        <option value="3">Ni de acuerdo ni en desacuerdo</option>
                        <option value="4">De acuerdo</option>
                        <option value="5">Totalmente de acuerdo</option>
                        <option value="0">No sÃ© responder</option>
                        <option value="0">No quiero responder</option>

                    </select>
                </div>

                <div class="pergunta">
                    <label class="block font-semibold mb-2">4. Â¿CÃ³mo calificarÃ­a el ambiente del aula en tÃ©rminos de
                        acÃºstica?</label>
                    <select name="QuestÃ£o 11.  Como vocÃª avalia o ambiente para as aulas quanto Ã  acÃºstica"
                        class="w-full border border-gray-300 rounded-lg p-2" required>
                        <option value="">Seleccione</option>
                        <option value="1">Muy malo/a</option>
                        <option value="2">Malo/a</option>
                        <option value="3">Regular</option>
                        <option value="4">Bueno/a</option>
                        <option value="5">Muy bueno/a</option>
                        <option value="0">No sÃ© responder</option>
                        <option value="0">No quiero responder</option>
                    </select>
                </div>

                <div class="pergunta">
                    <label class="block font-semibold mb-2">5. Â¿CÃ³mo calificarÃ­a la cantidad de material proporcionado
                        para las actividades de laboratorio?</label>
                    <select
                        name="16. Como vocÃª avalia a quantidade de material disponibilizado para as atividades de laboratÃ³rio ?"
                        class="w-full border border-gray-300 rounded-lg p-2" required>
                        <option value="">Seleccione</option>
                        <option value="1">Muy malo</option>
                        <option value="2">Malo</option>
                        <option value="3">Regular</option>
                        <option value="4">Buena</option>
                        <option value="5">Muy buena</option>
                        <option value="0">No sÃ© responder</option>
                        <option value="0">No quiero responder</option>
                    </select>
                </div>

                <div class="pergunta">
                    <label class="block font-semibold mb-2">6. Â¿Son adecuados los servicios que se prestan en la
                        cafeterÃ­a?</label>
                    <select name="QuestÃ£o 17. Os serviÃ§os prestados na cantina sÃ£o adequados?"
                        class="w-full border border-gray-300 rounded-lg p-2" required>
                        <option value="">Seleccione</option>
                        <option value="1">Muy malos</option>
                        <option value="2">Malos</option>
                        <option value="3">Regulares</option>
                        <option value="4">Buenos/as</option>
                        <option value="5">Muy buenos/as</option>
                        <option value="0">No sÃ© responder</option>
                        <option value="0">No quiero responder</option>
                    </select>
                </div>

                <div class="pergunta">
                    <label class="block font-semibold mb-2">7. Â¿CÃ³mo calificarÃ­a el programa que apoya la participaciÃ³n
                        en eventos acadÃ©micos, cientÃ­ficos y tecnolÃ³gicos?</label>
                    <select
                        name="QuestÃ£o 26. Como vocÃª avalia o programa de auxÃ­lio Ã  participaÃ§Ã£o em eventos acadÃªmicos, cientÃ­ficos e tecnolÃ³gicos."
                        class="w-full border border-gray-300 rounded-lg p-2" required>
                        <option value="">Seleccione</option>
                        <option value="1">Muy malo/a</option>
                        <option value="2">Malo</option>
                        <option value="3">Regular</option>
                        <option value="4">Bueno</option>
                        <option value="5">Muy bueno</option>
                        <option value="0">No sÃ© responder</option>
                        <option value="0">No quiero responder</option>
                    </select>
                </div>

                <div class="pergunta">
                    <label class="block font-semibold mb-2">8. Â¿CÃ³mo calificarÃ­a el programa de seguimiento de servicios
                        sociales?</label>
                    <select name="QuestÃ£o 26. Como vocÃª avalia o programa de acompanhamento de serviÃ§o social"
                        class="w-full border border-gray-300 rounded-lg p-2" required>
                        <option value="">Seleccione</option>
                        <option value="1">Muy malo</option>
                        <option value="2">Malo</option>
                        <option value="3">Regular</option>
                        <option value="4">Bueno</option>
                        <option value="5">Muy bueno</option>
                        <option value="0">No sÃ© responder</option>
                        <option value="0">No quiero responder</option>
                    </select>
                </div>

                <div class="pergunta">
                    <label class="block font-semibold mb-2">9. Â¿CÃ³mo calificarÃ­a la organizaciÃ³n de las asociaciones
                        estudiantiles, los centros acadÃ©micos y los directorios acadÃ©micos?</label>
                    <select
                        name="QuestÃ£o 26. Como vocÃª avalia a organizaÃ§Ã£o de grÃªmios estudantis, centros acadÃªmicos e diretÃ³rios acadÃªmicos"
                        class="w-full border border-gray-300 rounded-lg p-2" required>
                        <option value="">Seleccione</option>
                        <option value="1">Muy malo</option>
                        <option value="2">Malo</option>
                        <option value="3">Regular</option>
                        <option value="4">Bueno</option>
                        <option value="5">Muy bueno</option>
                        <option value="0">No sÃ© responder</option>
                        <option value="0">No quiero responder</option>
                    </select>
                </div>

                <div class="pergunta">
                    <label class="block font-semibold mb-2">10. Â¿CÃ³mo calificarÃ­a la eficiencia y la eficacia con que se
                        utilizan los recursos financieros de IFSULDEMINAS?</label>
                    <select
                        name="QuestÃ£o 29. Como vocÃª avalia a eficiÃªncia e eficÃ¡cia com que os recursos financeiros do IFSULDEMINAS sÃ£o aplicados?"
                        class="w-full border border-gray-300 rounded-lg p-2" required>
                        <option value="">Seleccione</option>
                        <option value="1">Muy malos</option>
                        <option value="2">Malos</option>
                        <option value="3">Regular</option>
                        <option value="4">Buenas</option>
                        <option value="5">Muy bueno/a</option>
                        <option value="0">No sÃ© responder</option>
                        <option value="0">No quiero responder</option>
                    </select>
                </div>

                <div class="text-center">
                    <button type="submit" class="btn btn-success px-4 mt-3">
                        <i class="bi bi-robot"></i> PredicciÃ³n de envÃ­o y recepciÃ³n
                    </button>
                </div>
            </form>

            <div id="resultado" class="alert mt-4 text-center d-none"></div>
    </main>

    <footer>
        Â© 2025 ComisiÃ³n Propia de EvaluaciÃ³n (CPA) - IFSULDEMINAS | Machine Learning
    </footer>

    <script src="{{ url_for('static', filename='js/firebase.js') }}"></script>
    <script>
        firebase.auth().onAuthStateChanged((user) => {
            if (!user) window.location.href = "/";
        });

        function logout() {
            firebase.auth().signOut().then(() => window.location.href = "/");
        }

        async function carregarCursos() {
            try {
                const response = await fetch("/static/data/lista_cursos.csv");
                const texto = await response.text();
                const linhas = texto.split("\n").slice(1);

                const select = document.getElementById("curso");

                linhas.forEach(linha => {
                    const curso = linha.trim();
                    if (curso) {
                        const option = document.createElement("option");
                        option.value = curso;
                        option.textContent = curso;
                        select.appendChild(option);
                    }
                });
            } catch (erro) {
                console.error("Erro ao carregar cursos:", erro);
            }
        }

        document.addEventListener("DOMContentLoaded", carregarCursos);
        document.getElementById("form-satisfacao").addEventListener("submit", async (e) => {
            e.preventDefault();

            const formData = new FormData(e.target);
            const dados = {};
            formData.forEach((valor, chave) => {
                dados[chave] = Number(valor);
            });

            const resposta = await fetch("/prever", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(dados)
            });

            const resultado = await resposta.json();

            const divResultado = document.getElementById("resultado");
            divResultado.classList.remove("d-none");
            divResultado.textContent = "ðŸ’¡ NÃ­vel de satisfaÃ§Ã£o previsto: " + resultado.resultado;

            if (resultado.resultado === "Alta") {
                divResultado.className = "alert alert-success text-center";
            } else if (resultado.resultado === "MÃ©dia") {
                divResultado.className = "alert alert-warning text-center";
            }
            else if (resultado.resultado === "Baixa") {
                divResultado.className = "alert alert-danger text-center";
            }
        });
    </script>
</body>

</html>